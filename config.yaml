# yaml-language-server: $schema=./node_modules/envio/evm.schema.json
name: nft-marketplace-indexer
event_decoder: viem
output: generated
unordered_multichain_mode: true
preload_handlers: true
field_selection:
  transaction_fields:
    - hash

networks:
  - id: 1
    start_block: 0
    rpc:
      - url: https://eth.llamarpc.com
        for: fallback
      - url: https://ethereum-rpc.publicnode.com
        for: fallback
    contracts:
      - name: Seaport
        address:
          - "0x0000000000000068F116a894984e2DB1123eB395" # Seaport 1.6
          - "0x00000000000000ADc04C56Bf30aC9d3c0aAF14dC" # Seaport 1.5
          - "0x00000000000001ad428e4906aE43D8F9852d0dD6" # Seaport 1.4
          - "0x0000000000000aD24e80fd803C6ac37206a45f15" # Seaport 1.3
          - "0x00000000000006c7676171937C444f6BDe3D6282" # Seaport 1.2
          - "0x00000000006c3852cbEf3e08E8dF289169EdE581" # Seaport 1.1
        handler: src/SeaportEventHandlers.ts
        events:
          - event: OrderFulfilled(bytes32 orderHash, address indexed offerer, address indexed zone, address recipient, (uint8,address,uint256,uint256)[] offer, (uint8,address,uint256,uint256,address)[] consideration)

      - name: SuperRareV1
        address:
          - "0x41a322b28d0ff354040e2cbc676f0320d8c8850d"
        handler: src/SuperRareV1EventHandlers.ts
        events:
          - event: Sold(address buyer, address seller, uint256 amount, uint256 tokenId)

      - name: SuperRareBazaar
        address:
          - "0x6D7c44773C52D396F43c2D511B81aa168E9a7a42"
        handler: src/SuperRareBazaarEventHandlers.ts
        events:
          - event: AcceptOffer(address indexed originContract, address indexed bidder, address indexed seller, address currencyAddress, uint256 amount, uint256 tokenId, address[] splitAddresses, uint8[] splitRatios)
          - event: Sold(address indexed originContract, address indexed buyer, address indexed seller, address currencyAddress, uint256 amount, uint256 tokenId)
          - event: AuctionSettled(address indexed contractAddress, address indexed bidder, address seller, uint256 indexed tokenId, address currencyAddress, uint256 amount)

      - name: SuperRareAuctionHouse
        address:
          - "0x8c9F364bf7a56Ed058fc63Ef81c6Cf09c833e656"
        handler: src/SuperRareAuctionHouseEventHandlers.ts
        events:
          - event: AuctionSettled(address indexed contractAddress, address indexed bidder, address seller, uint256 indexed tokenId, uint256 amount)

      - name: KnownOrigin
        address:
          - "0xf11ED77fD65840b64602526DDC38311E9923c81B"
        handler: src/KnownOriginEventHandlers.ts
        events:
          - event: BuyNowPurchased(uint256 indexed tokenId, address buyer, address currentOwner, uint256 price)

      - name: Foundation
        address:
          - "0xcDA72070E455bb31C7690a170224Ce43623d0B6f"
        handler: src/FoundationEventHandlers.ts
        events:
          - event: BuyPriceAccepted(address indexed nftContract, uint256 indexed tokenId, address indexed seller, address buyer, uint256 protocolFee, uint256 creatorFee, uint256 sellerRev)
          - event: OfferAccepted(address indexed nftContract, uint256 indexed tokenId, address indexed buyer, address seller, uint256 protocolFee, uint256 creatorFee, uint256 sellerRev)
          - event: PrivateSaleFinalized(address indexed nftContract, uint256 indexed tokenId, address indexed seller, address buyer, uint256 protocolFee, uint256 creatorFee, uint256 sellerRev, uint256 deadline)
          - event: ReserveAuctionCreated(address indexed seller, address indexed nftContract, uint256 indexed tokenId, uint256 duration, uint256 extensionDuration, uint256 reservePrice, uint256 auctionId)
          - event: ReserveAuctionFinalized(uint256 indexed auctionId, address indexed seller, address indexed bidder, uint256 protocolFee, uint256 creatorFee, uint256 ownerRev)

      - name: CryptoPunks
        address:
          - "0xb47e3cd837dDF8e4c57F05d70Ab865de6e193BBB"
        handler: src/CryptoPunksEventHandlers.ts
        events:
          - event: PunkBought(uint indexed tokenId, uint value, address indexed fromAddress, address indexed toAddress)
